---
$: ‚õìÔ∏è
$type: Morphism
$category: Monad
$aliases: [flatMap, bind, chain, ">>="]
$energy: ‚ú¶920
---

# ‚õìÔ∏è ‚Äî FlatMap (Bind)

> "To chain computations within a context."
> "–ó—á–µ–ø–∏—Ç–∏ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É."

---

## ‚àà

**–í–∏–∑–Ω–∞—á–µ–Ω–Ω—è (–¥–ª—è —Å–ø–∏—Å–∫—ñ–≤):**
`flatMap f xs ‚â° flatten(map f xs)`

**–¢–∏–ø (Monad M):**
`‚àÄa,b,M. (a ‚Üí M b) ‚Üí M a ‚Üí M b`

---

## ‚äÉ

- **[‚á¥](‚á¥.md)** (Map): –î–ª—è –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó.
- **[‚®á](‚®á.md)** (Join): –î–ª—è "—Å–ø–ª—é—â–µ–Ω–Ω—è" —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É `M<M<A>> ‚Üí M<A>`.

---

## ‚®ä (Monad Laws)

- **[‚ä∏](‚ä∏.md) Left Identity**: `return a >>= f ‚â° f a`
- **[‚ä¢](‚ä¢.md) Right Identity**: `m >>= return ‚â° m`
- **[‚âÉ](‚âÉ.md) Associativity**: `(m >>= f) >>= g ‚â° m >>= (Œªx. f x >>= g)`

---

## üîó

- **Monad**: `‚õìÔ∏è` —î –≤–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ—é –æ–ø–µ—Ä–∞—Ü—ñ—î—é –¥–ª—è –≤—Å—ñ—Ö –ú–æ–Ω–∞–¥.
- **Kleisli Arrows**: –î–æ–∑–≤–æ–ª—è—î –∫–æ–º–ø–æ–∑–∏—Ü—ñ—é —Ñ—É–Ω–∫—Ü—ñ–π, —â–æ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å –º–æ–Ω–∞–¥–∏—á–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è (`A ‚Üí M<B>`).

---

## üìê

```
M<a> --[‚á¥ f]--> M<M<b>> --[‚®á]--> M<b>
------------------------------------->
                 ‚õìÔ∏è
```

---

## üé≠

```typescript
// –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é, —â–æ –ø–æ–≤–µ—Ä—Ç–∞—î –º–∞—Å–∏–≤, –¥–æ –∫–æ–∂–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞
const duplicate = (x: number) => [x, x];
flatMap(duplicate, [1, 2, 3]); // ‚Üí [1, 1, 2, 2, 3, 3]

// –í–∏–¥–∞–ª–µ–Ω–Ω—è `null` –∑–Ω–∞—á–µ–Ω—å –ø—ñ–¥ —á–∞—Å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó
const safeParse = (s: string) => {
  const n = parseInt(s);
  return isNaN(n) ? [] : [n];
};
flatMap(safeParse, ["1", "two", "3"]); // ‚Üí [1, 3]
```

---

## üìä

```json
{
  "purity": "Depends on f",
  "termination": "Depends on f and structure"
}
```

---

## üåÄ

- **D1: Chaining**: –í–∏–º—ñ—Ä –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ–≥–æ –∑—á–µ–ø–ª–µ–Ω–Ω—è –æ–±—á–∏—Å–ª–µ–Ω—å.
- **D2: Flattening**: –í–∏–º—ñ—Ä "—Å–ø–ª—é—â–µ–Ω–Ω—è" –≤–∫–ª–∞–¥–µ–Ω–∏—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ–≤.

---

## ‚â°

- `bind`
- `>>=` (–≤ Haskell)
- `chain`
```
